<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit User</title>

    <!-- JavaScript for Adding and Removing Diary Entries -->
    <script type="text/javascript">
        function addDiaryEntry() {
            var container = document.getElementById("diary-entries-container");

            // Create a new div for the new entry
            var newEntry = document.createElement("div");
            newEntry.classList.add("diary-entry");

            // Create the date field
            var dateLabel = document.createElement("label");
            dateLabel.innerText = "Data:";
            var dateField = document.createElement("input");
            dateField.type = "date";
            dateField.name = "diary_date[]";  // Use array-like names to handle multiple entries

            // Create the text area for the diary entry
            var textAreaLabel = document.createElement("label");
            textAreaLabel.innerText = "Entrada:";
            var textArea = document.createElement("textarea");
            textArea.name = "diary_text[]";  // Use array-like names to handle multiple entries
            textArea.rows = 4;
            textArea.cols = 50;

            // Create the delete button
            var deleteButton = document.createElement("button");
            deleteButton.type = "button";
            deleteButton.innerText = "Excluir";
            deleteButton.onclick = function() {
                removeDiaryEntry(newEntry);
            };

            // Append the new fields to the container
            newEntry.appendChild(dateLabel);
            newEntry.appendChild(dateField);
            newEntry.appendChild(textAreaLabel);
            newEntry.appendChild(textArea);
            newEntry.appendChild(deleteButton);
            container.appendChild(newEntry);
        }

        function removeDiaryEntry(entry) {
            var container = document.getElementById("diary-entries-container");
            container.removeChild(entry);
        }
    </script>
</head>
<body>
    <h1>Vizualiar e/ou editar clientes.</h1>
    <form method="POST">
        {{ form.csrf_token }}

        <p>{{ form.name.label }} {{ form.name(size=20) }}</p>

        <p>{{ form.email.label }} {{ form.email(size=20) }}</p>

        <p>{{ form.phone.label }} {{ form.phone(size=20) }}</p>

        <p>{{ form.state.label }} {{ form.state(size=20) }}</p>

        <p>{{ form.city.label }} {{ form.city(size=20) }}</p>

        <p>{{ form.address.label }} {{ form.address(size=20) }}</p>

        <p>{{ form.bairro.label }} {{ form.bairro(size=20) }}</p>

        <p>{{ form.numero.label }} {{ form.numero(size=20) }}</p>

        <p>
            <div>
                {{ form.reg_date.label }}<br>
                {{ form.reg_date() }}
            </div>
        </p>

        <p>
            <div>
                {{ form.status.label }}<br>
                {{ form.status(style="width: 100px;") }}<br>  <!-- Set a specific width for the dropdown -->
            </div>
        </p>

        <!-- Diary Entries Section -->
        <h2>Entradas de Di치rio</h2>
        <div id="diary-entries-container">
            <!-- Dynamically added diary entries will go here -->
        </div>
        <button type="button" onclick="addDiaryEntry()">Adicionar Entrada</button><br><br>

        <p>
            <button type="submit">{{ form.submit.label }}</button>
        </p>
    </form>

    <h1>Detalhes do usu치rio</h1>

    <p><strong>Nome:</strong> {{ user.name }}</p>
    <p><strong>Email:</strong> {{ user.email }}</p>
    <p><strong>Telefone:</strong> {{ user.phone }}</p>

    <form method="POST" action="/delete/{{ user.id }}" style="display: inline;">
        {{ form.csrf_token }}
        <p>
            <button type="submit" onclick="return confirm('Tem Certeza que quer remover este usu치rio??');">
                Excluir Usu치rio
            </button>
        </p>
    </form>
</body>
</html>
